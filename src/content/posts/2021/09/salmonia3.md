---
title: Salmonia3の開発状況進捗
published: 2021-09-15
description: 開発中のSalmonia3の機能と進捗具合について報告
category: Programming
tags: [Swift, SwiftUI, Salmonia3+]
---

# [Salmonia3](https://apps.apple.com/jp/app/salmonia3/id1558344150)

日曜日には審査に出したいとか言っていた Salmonia3 ですが、まだ審査に出せていません。

なのでどのくらい作業が進んでいるのかを一応報告しておきます。



## UI のアップデート

見た目がわかりにくい+ダサいところがあったのでアップデート予定です。

### ウィジットの実装

![](https://pbs.twimg.com/media/E-mK9tTUUAMr_5X?format=jpg&name=900x900)

ホーム画面から編成と残り時間を確認できるウィジットを追加できるようになります。

ただ、ウィジットは常に更新されるわけではない（頑張って実装すればできるのかもしれんが）ので、確実に正しい表示がずっとできるわけではないことには注意。

あくまでもオマケ機能としてお考えください。

### ログイン画面

<video controls src="https://video.twimg.com/tweet_video/E_PC7iFVIAEwh-W.mp4"></video>

- ログインの進捗がわかるように更新
  - 今までは動いているかわからないログイン画面を、どこまでログインが進んだかわかるようにアップデートしました
- 背景をかっこよくアニメーション
  - かっこよさそうなデザインをパクってきました

既存の問題点としては初めて使う方がログイン方法がわからないと思うので、やり方用のリンクをどこかに貼らないといけないということです。

でも逆に言えばそれだけです。

### 設定画面

<video controls src="https://video.twimg.com/tweet_video/E_SS7aUVIAIb6_k.mp4"></video>

- SwiftUI でバグありまくりな Picker に代えて Action Sheet を採用
  - iPad では UI が多少変わるのだが、iPhone だとこれが良さそう

### リザルト詳細画面

![](https://pbs.twimg.com/media/E_SWiFfVUAEXdLW?format=jpg&name=4096x4096)

![](https://pbs.twimg.com/media/E_SWiFhUYAAz3_r?format=jpg&name=4096x4096)

ぶっちゃけわかりにくかったので三種類のデザインを実装予定です。

現在、二種類のデザインが実装済みです。

- ウラルチャンスタイル
  - 実装済みだけどもうちょい直したい感がある
- SalmonRec スタイル
  - 実装済みだけどもうちょい直したい感がある
- LemonTea 氏スタイル
  - 情報量が多いので実装がつらい！！

### シフト統計画面

<video controls src="https://video.twimg.com/tweet_video/E_SSh2NVgAMRzEI.mp4"></video>

スペシャル支給率とかがわかりにくかったのでアップデートしました。

- スペシャル支給率をわかりやすくした
- ブキの支給回数、支給割合を表示して統合
- 潮位・イベントごとの納品数を表示
  - 平均と最高の表示はページをくっつけちゃってもいいかもしれない

### リザルト取得画面

![](https://video.twimg.com/tweet_video/E_SXIwfVcAAr8Wi.mp4)

イカリング 2 からリザルトを取得するところをアップデートしました。

- すべてのデータを一括で取得するように変更
  - 今までは一件ずつループしていたのですが、ダサいので処理を変更
  - このためにライブラリをアップデートしたりした
- UI もログイン画面のものを流用したりした
- 回線落ちのリザルト取得できない問題に対応予定
  - 多分直ってはいるけどまだテストできていません

### リザルト取り込み画面

![](https://pbs.twimg.com/media/E_SS-TqVgAIgd8C?format=jpg&name=4096x4096)

Salmon Stats からのリザルト取り込み機能もアップデートしました

- すべてのデータを一括で取得するように変更
  - 今までは一件ずつループしていたのですが、ダサいので処理を変更
  - このためにライブラリをアップデートしたりした
- UI もログイン画面のものを流用したりした
- 取り込み失敗したときにスキップして完了するように仕様変更
  - ただ、失敗したことがわからないのでそれはそれで困るかも

## 未着手の作業

### 設定画面のアップデート

現在この作業をやっています。

ログの出力機能とかを消してしまったので、それをアップデートして直す予定です。

今週末には終わる見込みです。

### ステージ記録の詳細化

現在のステージ記録は単に潮位・イベントの組み合わせと合計の最高値しか表示していません。

- 編成の種類ごと（金ランダム、緑ランダム）で表示できるようにする
- 最高記録でなく TOP10 くらいまでを見れるようにする
- 記録からそのリザルトへジャンプできるようにする

を実装しようと思っています。ただ、次のアップデートで実装するかはわかりません。

### シフト統計のアップデート

現在のシフト統計はシフトの全リザルトの統計になっています。

- マッチングしたプレイヤーの組み合わせでフィルタリング予定
  - 固定メンバー四人でプレイしたときに、それぞれで統計が出せるイメージです

これも時間がかかりそうなので次のアップデートではないです。

記事は以上。


