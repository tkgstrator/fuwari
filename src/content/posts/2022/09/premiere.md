---
title: スプラトゥーン3前夜祭でLanPlayをする方法
published: 2022-09-01
description: スプラトゥーン3の前夜祭は終わってしまったのですが、LanPlayで遊ぶ方法について解説します
category: Hack
tags: [Nintendo Switch, Splatoon3, IPSwitch, LanPlay]
---

## スプラトゥーン 3 前夜祭

前夜祭で LanPlay を遊ぶために必要なものは以下の三つです。

- [起動チェック回避パッチ](https://cdn.discordapp.com/attachments/779493835247452180/1014114240682004551/gamRelease1.zip)
- イカッチャ復元ファイル
- [ldn_mitm](https://github.com/spacemeowx2/ldn_mitm)

イカッチャの復元ファイルは起動チェック回避パッチに同梱されていますので、別途ダウンロードする必要はありません。

> 当たり前ですが、LanPlay で遊ぶための環境も必要です

もし LanPlay の環境がない場合は上の二つをダウンロードしてからインストールしてください。

- [WinPcap 4.1.3](https://cdn.discordapp.com/attachments/720612694667034646/720613699018293298/WinPcap_4_1_3.exe)
- [C++再頒布パッケージ](https://cdn.discordapp.com/attachments/720612694667034646/720614442651615352/VC_redist.x64.exe)
- [起動用バッチファイル](https://cdn.discordapp.com/attachments/720612694667034646/998560124354429000/lanplay.zip)

インストールが終わったら起動用バッチファイルを開けば LanPlay に接続できます。

> このあとでスイッチ側でインターネット設定を変更するのを忘れないようにして下さい

### 起動チェック回避

前夜祭には二つの起動チェックがあるようです。

1. インターネット接続チェック
2. フェス終了アナウンスチェック

一つ目はインターネットにつながっていないとそもそもタイトル画面から先に進めず、一つ目をパスしてもフェスの結果を見てしまっているとタイトルに戻されるという処理のようです。

これを回避するのは IPSwitch のパッチ方式などがあるのですが、どこかの神ハッカーがバイナリにパッチを当てたものを作成していたようです。

```
atmosphere/
└── contents/
    └── 0100BA0018500000/
        ├── exefs/
        │   ├── main.npdm
        │   └── subsdk5
        └── romfs/
            ├── UniqueSequenceSPL/
            │   └── FileEntry/
            │       └── FileEntry.Product.110.byml.zs
            └── Pack/
                ├── Bootup.Nin_NX_NVN.pack.zs
                └── Scene/
                    └── LobbyLocal.pack.zs
```

配布されているパッチの中身は上のようなディレクトリ構造になっています。おそらく多くの人は必要としていないと思うのですが、一応解説しておきます。

### 配布ファイルの中身

#### main.npdm

起動チェック回避用のパッチが当てられたバイナリファイルです。

#### subsdk5

起動チェック回避用のパッチが当てられたバイナリファイルです。

#### LobbyLocal.pack.zs

イカッチャを復元したファイルです。前夜祭にはイカッチャが含まれていないので、ロビーをコピーすることでイカッチャらしきものを再現しています。

本来のイカッチャではないので従来のコマンドで LocalPlay から LanPlay に切り替えることができません。

> LanPlay に切り替えられないのにどうやって LanPlay で遊ぶんだというのについては後述します

#### Bootup.Nin_NX_NVN.pack.zs

起動時になんかするやつだと思うのですが、よくわかっていません。

#### FileEntry.Product.110.byml.zs

ファイルエントリ系をいじるファイルだと思うのですが、よくわかっていません。

### LanPlay

さて、前夜祭は強制的にロビーをイカッチャ化したために LanPlay に切り替えられないことは先程述べました。

じゃあ結局 LocalPlay しかできないのかというと、実は LocalPlay を LanPlay 化させるためのモジュールが存在します。それが ldn_mitm で、実は SwitchLanPlay を開発したのと同じ方が開発しています、すごいね。

で、ニンテンドースイッチの最新の FW にも対応しているのでこれを使わせていただきましょう。

ちなみに、[DeepSea](https://github.com/Team-Neptune/DeepSea)を導入している方であれば [DeepSea Toolbox](https://github.com/Team-Neptune/DeepSea-Toolbox) から有効化できますので、有効化してからスイッチを再起動してください。

> スイッチを再起動しないと動きませんので必ず再起動して下さい

ldn_mitm を有効化した状態でイカッチャから部屋を立てると、インターネットチェックが行われないためエラーなく部屋を立てることができると思います。

<video src="https://video.twimg.com/ext_tw_video/1565369996363976704/pu/vid/1280x720/Sa8cdiPaJkBxMfbg.mp4" type="video/mp4">
</video>

あとは適当に合流して遊んでください。

ただし、一方が前夜祭を正規に遊んだセーブデータの場合ステージが 12 つ解放されているのに対して、一切インターネットに接続せずに前夜祭を遊んだ場合はステージが 8 つしか解放されていないため、マッチングすると非同期エラーが発生して遊ぶことができません。

ステージ情報やブキ情報はセーブデータに書き込まれているので、セーブデータを復元することで対応できます。

> JKSV でセーブデータを復元しようとするとできなかったので Edizon を使用しました

自分はスプラトゥーン 3 を予約していないので、しばらくこれで遊ぼうと思います。てか、これ 8 人集めて遊ぶの大変そうですね。

記事は以上。
